(function(){var t=function(t,s){function n(){this.constructor=t}for(var r in s)o.call(s,r)&&(t[r]=s[r]);return n.prototype=s.prototype,t.prototype=new n,t.__super__=s.prototype,t},o={}.hasOwnProperty;this.NodeClient=function(o){function s(){this.params=this.get_params(location.href),this.params.ws&&this.connect_websocket()}return t(s,o),s.prototype.ws=1,s.prototype.domain=location.host.replace(/:.*/,""),s.prototype.params=0,s.prototype.connect_websocket=function(){var t;return 8080===this.ws_port&&(location.host.match(/[0-9].+[0-9]+.[0-9].+[0-9]+/)||(this.ws_port=80),location.host.match(/^192/)||(this.ws_port=80)),t=location.href.match(/^https/)?"wss":"ws",this.ws_url=80===this.ws_port?t+"://"+this.domain:t+"://"+this.domain+":"+this.ws_port,this.ws=io(this.ws_url),this.ws.on("connect",function(t){return function(){return console.log("websocket connected"),t.params.g&&t.ws.emit("g","object"==typeof t.params.g?t.params.g:[t.params.g]),t.ws.on("reload",function(){return location.reload()})}}(this))},s}(this.CommonJs)}).call(this);